import"./js/vue2.Bk-dUoBE.js";import{x as a,c as h,C as f,m as n,d,o as c,D as _,t as g,a as y,l as R,X as C}from"./js/vue.esm-bundler.DqIKZLqK.js";import{l as A}from"./js/index.vgYbMHas.js";import{l as w}from"./js/index.DieinYpm.js";import{c as k,B as S,l as E}from"./js/links.D0UtTLV7.js";/* empty css                */import{a as L}from"./js/addons.CLdWuRSN.js";import{C as v}from"./js/Index.BpENaonI.js";import{C as x}from"./js/Index.CrD8ZhL3.js";import{_ as H}from"./js/_plugin-vue_export-helper.BN1snXvA.js";import{i as b}from"./js/isEmpty.D0OpH3Dd.js";import"./js/translations.Buvln_cw.js";import"./js/default-i18n.Bd0Z306Z.js";import"./js/constants.DpuIWwJ9.js";import"./js/Caret.CE8P-qnG.js";import"./js/helpers.gCZRHsnR.js";import"./js/upperFirst.B82VqdXb.js";import"./js/_stringToArray.DnK4tKcY.js";import"./js/toString.re8Emy5g.js";import"./js/JsonValues.D25FTfEu.js";import"./js/ProBadge.CjKJMApR.js";import"./js/External.BpSjuEvK.js";import"./js/escapeRegExp.BTXidBUm.js";import"./js/Exclamation.BWU5OCVZ.js";import"./js/Checkbox.DUOJ_PLM.js";import"./js/Checkmark.CUxYD2Fh.js";import"./js/Gear.CG2jqT3t.js";import"./js/Slide.Qz9BWVTI.js";import"./js/Date.DIXoPKoJ.js";import"./js/DatePicker.CrseukB3.js";import"./js/Calendar.q2eLUa1q.js";import"./js/get.DM9gzD9j.js";import"./js/isUndefined.DoN5BCVL.js";import"./js/_getTag.C3-epdMz.js";import"./js/debounce.CXTawa95.js";import"./js/toNumber.B9R01g8s.js";import"./js/_baseTrim.BYZhh0MR.js";import"./js/isEqual.CDGYfgnv.js";import"./js/_baseIsEqual.BxgkTG0s.js";import"./js/Tooltip.Gayc6MvE.js";import"./js/Plus.D1ndwb34.js";const B={setup(){return{rootStore:k()}},components:{CoreModal:v,CoreAddRedirection:x},data(){return{addons:L,urls:[],display:!1,target:null,loading:!1,strings:{modalHeader:this.$t.__("Add a Redirect",this.$td),redirectAdded:this.$t.sprintf(this.$t.__('%2$sYour redirect was added and you may edit it <a href="%1$s" target="_blank">here</a>.%3$s',this.$td),this.rootStore.aioseo.urls.aio.redirects,"<strong>","</strong>")},watchClasses:["aioseo-redirects-slug-changed","aioseo-redirects-trashed-post"]}},computed:{classSelectors(){return"."+this.watchClasses.join(", .")}},methods:{reload(){var e,o;this.display=!1;const t=(o=(e=this.target)==null?void 0:e.parentElement)==null?void 0:o.parentElement;if(t&&(t.classList.contains("components-notice__content")||t.classList.contains("notice"))){t.innerHTML="<p>"+this.strings.redirectAdded+"</p>";return}this.target.outerHTML=this.strings.redirectAdded},loadRedirect(t){this.loading=!0,S.get(this.$links.restUrl("redirects/manual-redirects/"+t)).then(e=>{this.urls=e.body.redirects,this.loading=!1}).catch(e=>console.error("Redirect modal failed to load the redirect data.",e))},preloadRedirect(){const t=document.querySelector(this.classSelectors);if(t){const e=this.getElementRedirectHash(t);if(!e)return;this.loadRedirect(e)}},watchClicks(){document.body.onclick=t=>{var o;if(!((o=t.target)!=null&&o.classList))return;let e=!1;this.watchClasses.forEach(i=>{t.target.classList.contains(i)&&(e=!0)}),e&&(t.preventDefault(),this.target=t.target,this.display=!0,b(this.url)&&this.loadRedirect(this.getElementRedirectHash(this.target)))}},getElementRedirectHash(t){return new URLSearchParams(t.href).get("aioseo-manual-urls")}},async created(){this.preloadRedirect(),this.watchClicks(),window.aioseoBus.$on("wp-core-notice-created",()=>{this.preloadRedirect()})}},$={key:0,class:"aioseo-redirects-add-redirect-standalone"},D={class:"bd"};function N(t,e,o,i,r,p){const m=a("core-add-redirection"),u=a("core-modal");return r.addons.isActive("aioseo-redirects")?(c(),h("div",$,[f(u,{show:r.display,classes:["aioseo-redirects"],onClose:e[0]||(e[0]=T=>r.display=!1)},{headerTitle:n(()=>[_(g(r.strings.modalHeader),1)]),body:n(()=>[y("div",D,[r.loading?d("",!0):(c(),R(m,{key:0,urls:r.urls,target:r.urls[0].target?r.urls[0].target:"/",disableSource:!0,onAddedRedirect:p.reload},null,8,["urls","target","onAddedRedirect"]))])]),_:1},8,["show"])])):d("",!0)}const P=H(B,[["render",N]]),l=document.createElement("div");l.id="aioseo-redirects-add-redirect-standalone";document.body.appendChild(l);let s=C({...P,name:"Standalone/Redirects/AddRedirect"});s=A(s);s=w(s);E(s);s.mount("#aioseo-redirects-add-redirect-standalone");
